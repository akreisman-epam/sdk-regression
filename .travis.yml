sudo: required
language: generic
services:
- docker
before_install:
- openssl aes-256-cbc -k "$passwordForPrivateKeySetFile" -in private-jwkset.enc -out layer7/private-jwkset -d
- docker build -t hyperwallet/test .
env:
  global:
  - secure: uMEBxAgShYWDITCCLZJFKKhOBwrHMR58xLrOO31SoTuuqkO27gebN5q7DMiUDoyUzp3ZWKl9cxZ9qa6uHdZMgTA7HJ6GVPiJDy35n7uh8wlb3Rjbu2PB4Z7KSIV8XHyCFSRj3Nv4mOnFrLWM/5borRBMGtMHT3DyGN0TReQuKX12XvDx2FEVaJ03G/V7tGA75QIH4tyJxvhNBxFELE+DWqy9FmUJ4dFgE67Ey/LENxo0fXTfZmZosTXmi0fmEaAZMN2nLD0bAED9qnuL5P127OXShCk9pBJ3CuDUHHW8BF49njIp/qbiAwckCgGxARQlM67CiKcXExeXB4sKqVakLgY9wRK2WXil9LbSLvrab+RIDa8TSH9lf+1YjV/oK35/JGUhMT8I5uc1YgX9DboIuwBL9dVi0q54zrONmjruZGEIkf/7if8/kly1+AU1165I6AZq+0/MXe/9rHT2Xt1dkXTInV4F60eTuGJlXZ0x+v37fGg07j82pJ82OhVBzy6XW+cFvQXNZihiOiI7c0bhwqsLIxY28naHYI5dp6ek5oSU3md5sS0x34sAq6dmhEwS5yrDwJbIgtmf2eKrm61d7T/EJj9woZQr51fppNIaScjrWeM7MnsjzrnnOgoKtaI1A18danCcE5fFWM2ETE8WcuKxCFJoGZkb3HZiW7kFuJA=
  - secure: ujqzWNutXoyenWn+mDl523iOIyxmSpY60oGHkPNOoPqL+ype62Ieb6geaHCx1DWDU94nKfYqfIgrG2VGjT7OMYF1kPDSsQ3U4esgaRdsf01sYOyKezQ/JCK2mABGW4Bfybx3cTf3dbf7bqZjdd4w5PkFCIwOjiuLTJRwDbj29z0Zbyvk532HEp0U0tTjwHlLi+sCXuPoC4TMxJipJYirN8ItWIf3xMpYZhOO9kA/VS1L+z/n2a+JKloZhrzeHi62fFkx9JkQ8gUEfRnAm/OT2XdwSX2d/TeWX9kbIbFFBl7e3EX5eyu9nFX8zYTY7zOViXw/1evYvlUtG+hAe8bQxSrowrbplxcAZIU7o9P5ZPdRLst7myFd+ckxKvPfzu2Ekauf4oVIeUQraH0yad7Tr1hResEjFxXpgkLcsG2Sk6US/Giwidfq3+9/XpDdxH7vyoniIwQ8O8IF5gjYEaIFpdSuGiaxjSFJbedpR69mY4rubatwQvJYytUyJ9xFGOPhG+bQCKTBdinUuU24ppQx8fov7QNdzHcvFY8zJFIRxWs/PgWDuEuolpal1xenqOAUX4XjWroNjdPDhgHWoX3ZAj7IyyMGm9wgclMDFfpOlIRe5c8ZqYD57Rkp68QPwFXkrMNXiOZ2wuGo4j9VR4rX/6RWqTFB0HXXSwWuZ35s7jY=
  - secure: djLXdKYhu6VR1vBjQg+oqydTvrz4lG6CkJ3JlNYZv+Nt/x+Vb4QAKjX42JIlsg9NF8+4vv6npJbaqHpcAxjDfrdR3ZizMMiQoC1xa2tFBXpGL/Qf9Lvxr+G9rvf5p0J1BX9rVWahmuCBeRV/YNa/dlTou7hzVCWSitPd5fyrfmt1yNcryIzfhLZ8rzWzmuNMVKG804XGQJv9ErQ6j1Nsn8Gl9T42zgR3I9bGMfbX0HzVht8ZV/WY1SkoTQLTdG3rR9KNpCQphFF4ll21/LjQGEeCabf2s1CNReJTk0OVY4DubLsv/ook4npZkfFIHTyshZiCdhk6jLtg0590GlSHY485mJA2W77f//pTA5wBjns7zZaYqFKD46KdE5+W8NOnT5n98AmwuLV4On/8lRn0t6z2y1SIH2ixDSyFdMyqtALyKhRGJ3hQPUprbDRUzAlw3S/BCegsWrAjwBBpraObbiiPYTfxlTjkCkoonZdpOY8E7BaMZxwd73JSYdJvLa2FN17xgOr46mLP9uhH8oF3M1eR4Sp7aaTUwg1wdneSreEEI3W/wJQAP7j+UQBTl6dysHV6DHcpeEiv2v/6yVhLUaAkBiaj557KGxLuzMzdqB7iaCpBTNsBftU2WXeynzCGc6mFEGtbuu8Te5G052DxXzJP3+eVj0SmjZIQ1tqcnEU=
  - secure: zOS0+Jo5zl3p6OAxxCVAlbaulf4Gcf4/qtChf3A+ztTmdb2ZpQEe//21NxEjKBUpeeIXhl0D8vcBcqzeVZz0lrAQxnm1CEfAZ3/ZXIt4clficbbKIbXkfXaYTkXTFH6lBUbrO30XCXeW2vOTK1tYPmenuX6fbOEyVHcCOso2eS5YCfOdeGJQy5GW5/kHG6B//0LHBnMjdRshaT5b5POAtzQFm20q+b2JaX0lSU/VxlEAYBT47E8sCUwvtJu4WhI99glwa/lCt6qcWg2oKN/sahyKaVqHeBnnmekUN7PkVdDmzrNj4RYA1i3nJmoxeEScoIkV70TAcUF069GkJdvMvkA7bq+Jnj4XX7MBAPhf585MhlJk7YXEVsxYywIZDhWOpP0UBWkWVglhmyZqzjvudHidy3PLAzBlqrWqtgune0QMSef+4cP2Z6ifcSoRmPbOpTdtjBmmXQc6e35oDV928wNnFej2Z2EyvrpaL0p+QqluLrXK5BS0enuZDIQCT+guZZ972hUdvJ+ZNWx6No37IlsDSqH8SWnGMBXEK4AvzPD4mlGLSr42v1CBCnpBTYDCg//3HeKg57f5NzmH94CXJ/QjAOVVTTA7zYfr7BV3QXbNrsrKDDHBAV5il2RhxpoMO+wnORsoCnUgxjQPqZ6bpWpGDaAO+v39Xrg/dcf2Bdk=
  - secure: ih4JY8XYn9meg0982uJDOs23pTvTnbqiv1jdDxmRCY5/yOyEv68ZmvOsTgFFO+UT4XWFza+KZeV+NtFYzJ2FIZRLtAvNnTSKVXbN9I7rkW6l0HTuWyx6JUK4DDLjhno5PggB1PB4945B7Br1rWnUMIWBJpSzYlshUU3fd8w/SH26cVsy6VU8pQwqqbZIVHRBA66unMUyqH3w37AMyz2JPaOkHTA5Y4aPMkk5EtvSTwH4Uwj0Sa9SMuSFnW7IX71r/VHVDo/m3mEgaPTFcIS3RnKR1RcEB8RI0CuS1GOTNC8poOHjkUvMmF/mb9MEY8iQwHqVuQCnKPH+IStsZWffkXRiIqKo305WatjjKK5vxd6BnmY6tmOg9a0/mU0yRHzPPUm95+g92IbsLwtncPgBdVVWFNYUgXA3sowHQE++qq59mS9YK3ArQvV+8SfXIE6aBMZWJNxRv8vNcGMpijIiRdmva5SCRo19NNBJwn++haI9T+S5pIqhkp3mjsqaby9Nc7S3wI9WgI0SiU0lyiofv5He7iycHxJDLW4jeC08f0XBJvbUIhD5vQAKUZ6reKOTA/fkRD58ZI4IqpIq+yEVNNRcoMS4Jg6xIJqX/Eh2mkSJCPyH2GZi5rsG7tbC3rqDstBDBvqyFHWeBO37fSI+Zx6xHq0gQCSA80Mt2Y2mVDw=
jobs:
  include:
    - stage: "With encryption"
      script: docker run -it hyperwallet/test ant -f /app/test-all.xml -Dhw.username=${testusername} -Dhw.usernameWithEncryption=${testusernamewithencryption} -Dhw.password=${testpassword} -Dhw.programToken=${testprogramToken} -Dencrypted=true
    - stage: "No encryption"
      script: docker run -it hyperwallet/test ant -f /app/test-all.xml -Dhw.username=${testusername} -Dhw.usernameWithEncryption=${testusernamewithencryption} -Dhw.password=${testpassword} -Dhw.programToken=${testprogramToken} -Dencrypted=false